{
  "timestamp": "2025-08-19T07:03:44.646Z",
  "violations": [
    {
      "law": "DB-01",
      "file": "./packages/ai-prompt-templates/components/homepage/InteractivePricingCalculator.tsx",
      "detail": "SELECT pe tabel brut detectat (public\\.plans). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./sql/27_slug_ci_and_validation.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.bundles). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./sql/27_slug_ci_and_validation.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neurons). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "ASSET-01",
      "file": "./sql/31_asset_validation_policies.sql",
      "detail": "Acces assets fără condiția published=true.",
      "fix": "Aplică politica RLS sau EXISTS(...) pe neurons.published=true."
    },
    {
      "law": "DB-01",
      "file": "./sql/delete_validation_01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neurons). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DELETE-01",
      "file": "./sql/delete_validation_01.sql",
      "detail": "DELETE pe neurons găsit. Interzis dacă există obligații.",
      "fix": "Folosește UPDATE ... SET published=false; triggerele blochează DELETE cu obligații."
    },
    {
      "law": "DB-01",
      "file": "./sql/performance_indexes.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.bundles). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./sql/performance_indexes.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neurons). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./sql/performance_indexes.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.user_subscriptions). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "ASSET-01",
      "file": "./cursor/agent.ts",
      "detail": "Acces assets fără condiția published=true.",
      "fix": "Aplică politica RLS sau EXISTS(...) pe neurons.published=true."
    },
    {
      "law": "ARCH-01",
      "file": "./cursor/agent.ts",
      "detail": "Mixaj de branduri într-un singur app.",
      "fix": "Separă aplicațiile (ai-prompt-templates/ și 8vultus/) cu shared libs, nu shared UI runtime."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/simple_test.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neurons). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "ARCH-01",
      "file": "./test/smoke/smoke_arch01.ts",
      "detail": "Mixaj de branduri într-un singur app.",
      "fix": "Separă aplicațiile (ai-prompt-templates/ și 8vultus/) cu shared libs, nu shared UI runtime."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_asset01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neurons). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_asset01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neuron_assets). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "ASSET-01",
      "file": "./test/smoke/smoke_asset01.sql",
      "detail": "Acces assets fără condiția published=true.",
      "fix": "Aplică politica RLS sau EXISTS(...) pe neurons.published=true."
    },
    {
      "law": "DELETE-01",
      "file": "./test/smoke/smoke_asset_validation_01.sql",
      "detail": "DELETE pe neurons găsit. Interzis dacă există obligații.",
      "fix": "Folosește UPDATE ... SET published=false; triggerele blochează DELETE cu obligații."
    },
    {
      "law": "ASSET-01",
      "file": "./test/smoke/smoke_asset_validation_01.sql",
      "detail": "Acces assets fără condiția published=true.",
      "fix": "Aplică politica RLS sau EXISTS(...) pe neurons.published=true."
    },
    {
      "law": "CRON-01",
      "file": "./test/smoke/smoke_cron01.sql",
      "detail": "pg_cron folosit fără wrappers f_cron_run_*.",
      "fix": "Folosește f_cron_run_refresh_tier_access_pool_all / f_cron_run_check_library_cap / f_cron_run_preview_privileges_audit / f_cron_run_bundle_consistency_audit."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_db01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.bundles). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_db01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.plans). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_db01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neurons). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_db01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.user_subscriptions). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_db01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neuron_assets). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "ASSET-01",
      "file": "./test/smoke/smoke_db01.sql",
      "detail": "Acces assets fără condiția published=true.",
      "fix": "Aplică politica RLS sau EXISTS(...) pe neurons.published=true."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_delete01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.bundles). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_delete01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neurons). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DB-01",
      "file": "./test/smoke/smoke_delete01.sql",
      "detail": "SELECT pe tabel brut detectat (public\\.neuron_assets). Folosește views/RPC.",
      "fix": "Înlocuiește cu v_plans_public / v_bundle_public / rpc_search_neurons / rpc_get_my_active_plan / rpc_list_my_entitlements."
    },
    {
      "law": "DELETE-01",
      "file": "./test/smoke/smoke_delete01.sql",
      "detail": "DELETE pe neurons găsit. Interzis dacă există obligații.",
      "fix": "Folosește UPDATE ... SET published=false; triggerele blochează DELETE cu obligații."
    },
    {
      "law": "ASSET-01",
      "file": "./test/smoke/smoke_delete01.sql",
      "detail": "Acces assets fără condiția published=true.",
      "fix": "Aplică politica RLS sau EXISTS(...) pe neurons.published=true."
    }
  ],
  "summary": {
    "total": 30,
    "byLaw": {
      "DB-01": 18,
      "ASSET-01": 6,
      "DELETE-01": 3,
      "ARCH-01": 2,
      "CRON-01": 1
    }
  }
}