(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{8760:function(e,t,s){Promise.resolve().then(s.bind(s,7136))},7136:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var r=s(7573),n=s(7653),a=s(607),i=s(5579);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,a.W)(t))}let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:l("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});o.displayName="Card";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:l("flex flex-col space-y-1.5 p-6",s),...n})});c.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("h3",{ref:t,className:l("text-2xl font-semibold leading-none tracking-tight",s),...n})});d.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("p",{ref:t,className:l("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:l("p-6 pt-0",s),...n})});u.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:l("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";let m=(0,s(9289).j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=n.forwardRef((e,t)=>{let{className:s,variant:n,size:a,loading:i,disabled:o,children:c,...d}=e;return(0,r.jsxs)("button",{className:l(m({variant:n,size:a,className:s})),ref:t,disabled:o||i,...d,children:[i&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});f.displayName="Button";var x=s(4250);let h={enabled:!0,endpoint:s(4859).env.NEXT_PUBLIC_ANALYTICS_ENDPOINT||"/api/analytics",batchSize:10,flushInterval:5e3,maxRetries:3,retryDelay:1e3},g=[],p=[],v=[],y=null,j=null,w=null,b={};function N(){if(h.enabled)try{let e;j="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),w=Date.now(),setInterval(()=>{w&&S("session_duration",{duration:Date.now()-w})},6e4),function(){if("PerformanceObserver"in window)try{if(new PerformanceObserver(e=>{for(let t of e.getEntries())if("largest-contentful-paint"===t.entryType)b.lcp=t.startTime,T("lcp",t.startTime,"ms");else if("first-input"===t.entryType){let e=t.processingStart-t.startTime;b.fid=e,T("fid",e,"ms")}else"layout-shift"===t.entryType&&(b.cls||(b.cls=0),b.cls+=t.value,T("cls",b.cls,"score"))}).observe({entryTypes:["largest-contentful-paint","first-input","layout-shift"]}),"performance"in window){let e=performance.getEntriesByType("navigation")[0];e&&(T("ttfb",e.responseStart-e.requestStart,"ms"),T("dom_content_loaded",e.domContentLoadedEventEnd-e.domContentLoadedEventStart,"ms"),T("page_load",e.loadEventEnd-e.loadEventStart,"ms"))}new PerformanceObserver(e=>{for(let t of e.getEntries())t.transferSize>0&&T("resource_load",t.responseEnd-t.startTime,"ms",{name:t.name,type:t.initiatorType||"other",size:t.transferSize})}).observe({entryTypes:["resource"]})}catch(e){console.error("Failed to initialize performance monitoring:",e)}}(),e=null,document.addEventListener("visibilitychange",()=>{document.hidden?(e=Date.now(),S("page_hidden")):e&&(S("page_visible",{hiddenDuration:Date.now()-e}),e=null)}),window.addEventListener("error",e=>{var t;E("javascript_error",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:null===(t=e.error)||void 0===t?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{E("unhandled_promise_rejection",{reason:e.reason,promise:e.promise})}),window.__REACT_ERROR_BOUNDARY__=(e,t)=>{E("react_error_boundary",{message:e.message,stack:e.stack,componentStack:t.componentStack})},function(){let e;let t=0,s=0,r=Date.now();window.addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(()=>{let e=Math.round(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100);e>t&&S("scroll_depth",{depth:t=e})},100)}),document.addEventListener("click",e=>{var t;s++;let r=e.target;S("click",{target:r.tagName.toLowerCase(),className:r.className,id:r.id,text:null===(t=r.textContent)||void 0===t?void 0:t.substring(0,100)})});let n=()=>{let e=Date.now();e-r>3e4&&(S("user_interaction",{timeSinceLastInteraction:e-r,scrollDepth:t,clickCount:s}),r=e)};document.addEventListener("mousemove",n),document.addEventListener("keydown",n),document.addEventListener("touchstart",n)}(),y&&clearInterval(y),y=setInterval(()=>{C(),k()},h.flushInterval),console.log("Analytics initialized successfully")}catch(e){console.error("Failed to initialize analytics:",e)}}function S(e,t){if(!h.enabled)return;let s={name:e,properties:t,timestamp:Date.now(),sessionId:j,page:window.location.pathname,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,referrer:"undefined"!=typeof document?document.referrer:void 0};g.push(s),g.length>=h.batchSize&&C()}function T(e,t,s,r){if(!h.enabled)return;let n={name:e,value:t,unit:s,metadata:r,timestamp:Date.now()};p.push(n),p.length>=h.batchSize&&k()}function E(e,t){if(!h.enabled)return;let s={message:e,metadata:t,timestamp:Date.now(),sessionId:j};v.push(s),D()}async function C(){if(0===g.length)return;let e=[...g];g=[];try{await P("events",e)}catch(t){console.error("Failed to flush events:",t),g.unshift(...e)}}async function k(){if(0===p.length)return;let e=[...p];p=[];try{await P("performance",e)}catch(t){console.error("Failed to flush performance data:",t),p.unshift(...e)}}async function D(){if(0===v.length)return;let e=[...v];v=[];try{await P("errors",e)}catch(t){console.error("Failed to flush errors:",t),v.unshift(...e)}}async function P(e,t){if(!h.enabled)return;let s={type:e,data:t,timestamp:Date.now(),sessionId:j},r=0;for(;r<h.maxRetries;)try{let e=await fetch(h.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok)return;throw Error("HTTP ".concat(e.status,": ").concat(e.statusText))}catch(e){if(++r>=h.maxRetries)throw e;await new Promise(e=>setTimeout(e,h.retryDelay*r))}}let I={error:(e,t)=>{console.error("[Analytics] ".concat(e),t),E(e,t)}},R=(e,t,s,r)=>{T(e,t,s,r)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",N):N();let _={fcp:1800,lcp:2500,fid:100,cls:.1,ttfb:800};var L=s(9790),z=s(3989),O=s(5555),U=s(2439),A=s(6465),B=s(5155),F=s(5965);function M(){let{user:e,userTier:t}=(0,x.a)(),[s,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),[m,h]=(0,n.useState)(30),[g,p]=(0,n.useState)(!0),{metrics:v,getPerformanceScore:y}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{enabled:t=!0,thresholds:s={},reportToAnalytics:r=!0,logToConsole:a=!1,onThresholdExceeded:i}=e,[l,o]=(0,n.useState)({fcp:null,lcp:null,fid:null,cls:null,ttfb:null,componentMountTime:0,renderTime:0,interactionTime:0,memoryUsage:null,networkInfo:null}),[c,d]=(0,n.useState)(!1),u=(0,n.useRef)(Date.now()),m=(0,n.useRef)(Date.now()),f=(0,n.useRef)(null),x=(0,n.useRef)(null),h=(0,n.useRef)(null),g={..._,...s};(0,n.useEffect)(()=>{if(!t)return;let e=Date.now()-u.current;o(t=>({...t,componentMountTime:e})),a&&console.log("Component mounted in ".concat(e,"ms")),r&&R("component_mount",{mountTime:e})},[t,r,a]);let p=(0,n.useCallback)(()=>{let e=Date.now()-m.current;o(t=>({...t,renderTime:e})),a&&console.log("Component rendered in ".concat(e,"ms")),r&&R("component_render",{renderTime:e}),i&&e>100&&i("renderTime",e,100)},[r,a,i]),v=(0,n.useCallback)(()=>{if(t&&!c){d(!0),m.current=Date.now();try{if("PerformanceObserver"in window&&(f.current=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{if("first-contentful-paint"===e.name){let t=e.startTime;o(e=>({...e,fcp:t})),a&&console.log("FCP: ".concat(t,"ms")),r&&R("fcp",{fcp:t}),t>g.fcp&&i&&i("fcp",t,g.fcp)}})}),f.current.observe({entryTypes:["paint"]})),"PerformanceObserver"in window&&(x.current=new PerformanceObserver(e=>{let t=e.getEntries(),s=t[t.length-1];if(s){let e=s.startTime;o(t=>({...t,lcp:e})),a&&console.log("LCP: ".concat(e,"ms")),r&&R("lcp",{lcp:e}),e>g.lcp&&i&&i("lcp",e,g.lcp)}}),x.current.observe({entryTypes:["largest-contentful-paint"]})),"PerformanceObserver"in window&&(h.current=new PerformanceObserver(e=>{let t=0;for(let s of e.getEntries())s.hadRecentInput||(t+=s.value);o(e=>({...e,cls:t})),a&&console.log("CLS: ".concat(t)),r&&R("cls",{cls:t}),t>g.cls&&i&&i("cls",t,g.cls)}),h.current.observe({entryTypes:["layout-shift"]})),"PerformanceObserver"in window&&new PerformanceObserver(e=>{e.getEntries().forEach(e=>{let t=e.processingStart-e.startTime;o(e=>({...e,fid:t})),a&&console.log("FID: ".concat(t,"ms")),r&&R("fid",{fid:t}),t>g.fid&&i&&i("fid",t,g.fid)})}).observe({entryTypes:["first-input"]}),"performance"in window){let e=performance.getEntriesByType("navigation")[0];if(e){let t=e.responseStart-e.requestStart;o(e=>({...e,ttfb:t})),a&&console.log("TTFB: ".concat(t,"ms")),r&&R("ttfb",{ttfb:t}),t>g.ttfb&&i&&i("ttfb",t,g.ttfb)}}if("memory"in performance){let e=()=>{let e=performance.memory;o(t=>({...t,memoryUsage:{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit}}))};e();let t=setInterval(e,5e3);return()=>clearInterval(t)}if("connection"in navigator){let e=navigator.connection;o(t=>({...t,networkInfo:{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt}}))}}catch(e){I.error("Failed to start performance monitoring",{error:e})}}},[t,c,g,r,a,i]),y=(0,n.useCallback)(()=>{f.current&&(f.current.disconnect(),f.current=null),x.current&&(x.current.disconnect(),x.current=null),h.current&&(h.current.disconnect(),h.current=null),d(!1)},[]),j=(0,n.useCallback)(e=>{let t=Date.now()-m.current;o(e=>({...e,interactionTime:t})),a&&console.log("".concat(e," interaction took ").concat(t,"ms")),r&&R("interaction",{interactionName:e,interactionTime:t}),m.current=Date.now()},[r,a]),w=(0,n.useCallback)(()=>{let e=100,t=0;return l.fcp&&l.fcp>g.fcp&&(e-=20,t++),l.lcp&&l.lcp>g.lcp&&(e-=25,t++),l.fid&&l.fid>g.fid&&(e-=15,t++),l.cls&&l.cls>g.cls&&(e-=20,t++),l.ttfb&&l.ttfb>g.ttfb&&(e-=20,t++),{score:Math.max(0,e),issues:t}},[l,g]);return(0,n.useEffect)(()=>(t&&v(),()=>{y()}),[t,v,y]),{metrics:l,isMonitoring:c,startMonitoring:v,stopMonitoring:y,measureRenderTime:p,measureInteraction:j,getPerformanceScore:w,thresholds:g}}({enabled:!0,logToConsole:!1,onThresholdExceeded:(e,t,s)=>{console.warn("Performance threshold exceeded: ".concat(e," = ").concat(t," (threshold: ").concat(s,")"))}});(0,n.useEffect)(()=>{e&&"admin"!==t&&(window.location.href="/403")},[e,t]);let j=async()=>{try{l(!0);let e={users:{total:1250,active:89,new:12},performance:{avgResponseTime:245,errorRate:.8,uptime:99.9},analytics:{pageViews:15420,uniqueVisitors:2340,conversionRate:3.2},system:{cpuUsage:45,memoryUsage:67,diskUsage:23}};e.performance.avgResponseTime+=50*Math.random()-25,e.analytics.pageViews+=Math.floor(1e3*Math.random()-500),e.system.cpuUsage+=10*Math.random()-5,a(e)}catch(e){console.error("Failed to fetch metrics:",e)}finally{l(!1)}};if((0,n.useEffect)(()=>{if(!g)return;j();let e=setInterval(j,1e3*m);return()=>clearInterval(e)},[g,m]),(0,n.useEffect)(()=>{j()},[]),!e||"admin"!==t)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acces Restricționat"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Nu aveți permisiunea de a accesa această pagină."})]})});let w=y();return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard de Monitoring"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Monitorizare \xeen timp real a performanței și utilizării sistemului"})]}),(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(f,{onClick:j,disabled:i,loading:i,children:"Actualizează"}),(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:g,onChange:e=>p(e.target.checked),className:"rounded"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Auto-refresh"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Interval:"}),(0,r.jsxs)("select",{value:m,onChange:e=>h(Number(e.target.value)),className:"border rounded px-2 py-1 text-sm",children:[(0,r.jsx)("option",{value:15,children:"15s"}),(0,r.jsx)("option",{value:30,children:"30s"}),(0,r.jsx)("option",{value:60,children:"1m"}),(0,r.jsx)("option",{value:300,children:"5m"})]})]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{children:(0,r.jsxs)(d,{className:"flex items-center space-x-2",children:[(0,r.jsx)(L.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Scor Performanță"})]})}),(0,r.jsx)(u,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-4xl font-bold ".concat(w.score>=90?"text-green-600":w.score>=70?"text-yellow-600":"text-red-600"),children:[w.score,"/100"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Scor General"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:w.issues}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Probleme Identificate"})]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(w.score>=90?"bg-green-600":w.score>=70?"bg-yellow-600":"bg-red-600"),style:{width:"".concat(w.score,"%")}})})})]})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)(o,{children:[(0,r.jsxs)(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d,{className:"text-sm font-medium",children:"Utilizatori"}),(0,r.jsx)(z.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(u,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:null==s?void 0:s.users.total.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",null==s?void 0:s.users.new," noi această săptăm\xe2nă"]})]})]}),(0,r.jsxs)(o,{children:[(0,r.jsxs)(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d,{className:"text-sm font-medium",children:"Timp Răspuns"}),(0,r.jsx)(O.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(u,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[null==s?void 0:s.performance.avgResponseTime,"ms"]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Uptime: ",null==s?void 0:s.performance.uptime,"%"]})]})]}),(0,r.jsxs)(o,{children:[(0,r.jsxs)(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d,{className:"text-sm font-medium",children:"Vizualizări"}),(0,r.jsx)(U.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(u,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:null==s?void 0:s.analytics.pageViews.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[null==s?void 0:s.analytics.uniqueVisitors," vizitatori unici"]})]})]}),(0,r.jsxs)(o,{children:[(0,r.jsxs)(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d,{className:"text-sm font-medium",children:"CPU"}),(0,r.jsx)(A.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(u,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[null==s?void 0:s.system.cpuUsage,"%"]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Memorie: ",null==s?void 0:s.system.memoryUsage,"%"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{children:(0,r.jsx)(d,{children:"Metrici Performanță"})}),(0,r.jsx)(u,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"FCP (First Contentful Paint)"}),(0,r.jsx)("span",{className:"font-medium",children:v.fcp?"".concat(v.fcp.toFixed(0),"ms"):"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"LCP (Largest Contentful Paint)"}),(0,r.jsx)("span",{className:"font-medium",children:v.lcp?"".concat(v.lcp.toFixed(0),"ms"):"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"FID (First Input Delay)"}),(0,r.jsx)("span",{className:"font-medium",children:v.fid?"".concat(v.fid.toFixed(0),"ms"):"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"CLS (Cumulative Layout Shift)"}),(0,r.jsx)("span",{className:"font-medium",children:v.cls?v.cls.toFixed(3):"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"TTFB (Time to First Byte)"}),(0,r.jsx)("span",{className:"font-medium",children:v.ttfb?"".concat(v.ttfb.toFixed(0),"ms"):"N/A"})]})]})})]}),(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{children:(0,r.jsx)(d,{children:"Sănătatea Sistemului"})}),(0,r.jsx)(u,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Status API"}),(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-green-600",children:"Operațional"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Database"}),(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-green-600",children:"Conectat"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Storage"}),(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-yellow-600",children:"67% Utilizat"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Rate Limiting"}),(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-green-600",children:"Normal"})]})]})]})})]})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{children:(0,r.jsxs)(d,{className:"flex items-center space-x-2",children:[(0,r.jsx)(B.Z,{className:"w-5 h-5 text-yellow-600"}),(0,r.jsx)("span",{children:"Alerte Active"})]})}),(0,r.jsx)(u,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(B.Z,{className:"w-4 h-4 text-yellow-600"}),(0,r.jsx)("span",{className:"text-sm text-yellow-800",children:"Utilizarea memoriei este ridicată (67%)"})]}),(0,r.jsx)(f,{size:"sm",variant:"outline",children:"Rezolvă"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(F.Z,{className:"w-4 h-4 text-blue-600"}),(0,r.jsx)("span",{className:"text-sm text-blue-800",children:"Backup automat programat pentru 02:00"})]}),(0,r.jsx)(f,{size:"sm",variant:"outline",children:"Detalii"})]})]})})]})})]})})}},4250:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return c},a:function(){return d}});var r=s(7573),n=s(7653),a=s(6940);s(4859);let i=()=>(0,a.createClientComponentClient)();var l=s(7200);let o=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[s,a]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)("free"),f=i(),x=(0,n.useCallback)(async e=>{try{let{data:t,error:s}=await f.from("user_subscriptions").select("tier, status").eq("user_id",e).eq("status","active").single();s||!t?(l.kg.info("User has no active subscription, defaulting to free tier",{userId:e}),m("free")):(l.kg.info("User tier retrieved successfully",{userId:e,tier:t.tier}),m(t.tier))}catch(t){(0,l.H)("Error getting user tier",{userId:e,error:t instanceof Error?t.message:"Unknown error"}),m("free")}},[f]);(0,n.useEffect)(()=>{(async()=>{try{let{data:{session:t},error:s}=await f.auth.getSession();if(s)(0,l.H)("Error getting session",{error:s.message});else{var e;a(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),(null==t?void 0:t.user)&&await x(t.user.id)}}catch(e){(0,l.H)("Session error",{error:e instanceof Error?e.message:"Unknown error"})}finally{d(!1)}})();let{data:{subscription:e}}=f.auth.onAuthStateChange(async(e,t)=>{var s,r;l.kg.info("Auth state changed",{event:e,userEmail:(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.email)?t.user.email.substring(0,3)+"***@"+t.user.email.split("@")[1]:"none"}),a(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),(null==t?void 0:t.user)?await x(t.user.id):m("free"),d(!1)});return()=>e.unsubscribe()},[x,f.auth]);let h=async(e,t)=>{try{var s;let{data:r,error:n}=await f.auth.signInWithPassword({email:e,password:t});if(n)return(0,l.H)("Sign in failed",{email:e.substring(0,3)+"***@"+e.split("@")[1],error:n.message}),{error:n.message};return l.kg.info("User signed in successfully",{userId:null===(s=r.user)||void 0===s?void 0:s.id,email:e.substring(0,3)+"***@"+e.split("@")[1]}),{}}catch(t){return(0,l.H)("Unexpected error during sign in",{email:e.substring(0,3)+"***@"+e.split("@")[1],error:t instanceof Error?t.message:"Unknown error"}),{error:"An unexpected error occurred"}}},g=async(e,t)=>{try{var s;let{data:r,error:n}=await f.auth.signUp({email:e,password:t});if(n)return(0,l.H)("Sign up failed",{email:e.substring(0,3)+"***@"+e.split("@")[1],error:n.message}),{error:n.message};if(r.user&&!r.user.email_confirmed_at)return l.kg.info("User signup successful, email confirmation required",{userId:r.user.id,email:e.substring(0,3)+"***@"+e.split("@")[1]}),{error:"Please check your email to confirm your account"};return l.kg.info("User signup successful",{userId:null===(s=r.user)||void 0===s?void 0:s.id,email:e.substring(0,3)+"***@"+e.split("@")[1]}),{}}catch(t){return(0,l.H)("Unexpected error during sign up",{email:e.substring(0,3)+"***@"+e.split("@")[1],error:t instanceof Error?t.message:"Unknown error"}),{error:"An unexpected error occurred"}}},p=async()=>{try{let{error:e}=await f.auth.signOut();e?(0,l.H)("Sign out error",{error:e.message}):l.kg.info("User signed out successfully",{userId:null==s?void 0:s.id,email:(null==s?void 0:s.email)?s.email.substring(0,3)+"***@"+s.email.split("@")[1]:"unknown"})}catch(e){(0,l.H)("Sign out error",{error:e instanceof Error?e.message:"Unknown error"})}},v=async()=>{s&&await x(s.id)};return(0,r.jsx)(o.Provider,{value:{user:s,loading:c,userTier:u,signIn:h,signUp:g,signOut:p,refreshUserTier:v},children:t})}let d=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7200:function(e,t,s){"use strict";var r,n;s.d(t,{H:function(){return l},PN:function(){return c},kg:function(){return i},yN:function(){return o}}),(n=r||(r={})).ERROR="error",n.WARN="warn",n.INFO="info",n.DEBUG="debug";class a{shouldLog(e){return!!this.isDevelopment||!this.isProduction||"error"===e||"warn"===e}formatMessage(e){let t=e.timestamp,s=e.level.toUpperCase(),r=e.message,n=e.context?" | Context: ".concat(JSON.stringify(e.context)):"",a=e.error?" | Error: ".concat(e.error.message):"";return"[".concat(t,"] ").concat(s,": ").concat(r).concat(n).concat(a)}addToBuffer(e){this.logBuffer.push(e),this.logBuffer.length>this.maxBufferSize&&this.logBuffer.shift()}async sendToExternalService(e){if(this.isProduction&&"error"===e.level)try{await fetch("/api/logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.error("Failed to send log to external service:",e)}}error(e,t,s){let r={level:"error",message:e,timestamp:new Date().toISOString(),context:t,error:s};this.addToBuffer(r),this.shouldLog("error")&&console.error(this.formatMessage(r)),this.sendToExternalService(r)}warn(e,t){let s={level:"warn",message:e,timestamp:new Date().toISOString(),context:t};this.addToBuffer(s),this.shouldLog("warn")&&console.warn(this.formatMessage(s))}info(e,t){let s={level:"info",message:e,timestamp:new Date().toISOString(),context:t};this.addToBuffer(s),this.shouldLog("info")&&console.info(this.formatMessage(s))}debug(e,t){let s={level:"debug",message:e,timestamp:new Date().toISOString(),context:t};this.addToBuffer(s),this.shouldLog("debug")&&console.debug(this.formatMessage(s))}security(e,t){let s={level:"warn",message:"SECURITY: ".concat(e),timestamp:new Date().toISOString(),context:t};this.addToBuffer(s),console.warn(this.formatMessage(s)),this.sendToExternalService(s)}performance(e,t,s){let r={level:"info",message:"PERFORMANCE: ".concat(e," took ").concat(t,"ms"),timestamp:new Date().toISOString(),context:s};this.addToBuffer(r),this.shouldLog("info")&&console.info(this.formatMessage(r))}getLogs(e){return e?this.logBuffer.filter(t=>t.level===e):[...this.logBuffer]}clearLogs(){this.logBuffer=[]}exportLogs(){return this.logBuffer.map(e=>this.formatMessage(e)).join("\n")}constructor(){this.isDevelopment=!1,this.isProduction=!0,this.logBuffer=[],this.maxBufferSize=100}}let i=new a,l=(e,t,s)=>i.error(e,t,s),o=(e,t)=>i.warn(e,t),c=(e,t)=>i.info(e,t)}},function(e){e.O(0,[940,255,293,528,744],function(){return e(e.s=8760)}),_N_E=e.O()}]);